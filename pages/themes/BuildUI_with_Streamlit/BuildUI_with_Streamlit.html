<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>BuildUI_with_Streamlit</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
    <link rel="shortcut icon" href="/ProgressBG-ChatGPT_and_ML-Slides/images/favicons/favicon-32.png">
    <!-- css & themes include -->
    <link rel="stylesheet" href="/ProgressBG-ChatGPT_and_ML-Slides/lib/reveal.js/css/reveal.css">
    <link rel="stylesheet" href="/ProgressBG-ChatGPT_and_ML-Slides/outfit/css/themes/light.css" id="theme">
    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match( /print-pdf/gi ) ? '/ProgressBG-ChatGPT_and_ML-Slides/lib/reveal.js/css/print/pdf.css' : '/ProgressBG-ChatGPT_and_ML-Slides/lib/reveal.js/css/print/paper.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->

    <!-- add MathJax support -->
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <base target="_blank">
</head>
<body>
    <div class="reveal default center" data-transition-speed="default" data-background-transition="default">
        <div class="top_links">
            <a class="home_link" href="/ProgressBG-ChatGPT_and_ML-Slides/pages/agenda/agenda.html#BuildUI_with_Streamlit" target="_top"><i class="fa fa-home"></i></a>
            <span class="help_link" href="#"><i class="fa fa-question"></i></span>
            <div class="help_text">
                <div class="note">Keyboard shortcuts:</div>
                <div><span>N/Space</span><span>Next Slide</span></div>
                <div><span>P</span><span>Previous Slide</span></div>
                <div><span>O</span><span>Slides Overview</span></div>
                <div><span>ctrl+left click</span><span>Zoom Element</span></div>
                <div class="print-howto"><br>If you want print version => add '<code>?print-pdf</code>' <br> at the end of slides URL (remove '#' fragment) and then print. <br>
                Like: https://ProgressBG-ChatGPT_and_ML-course.github.io/...CourseIntro.html?print-pdf </div>
            </div>
        </div>
        <div class="footer theme_switch">
            <a href="#" onclick="document.getElementById('theme').setAttribute('href','/ProgressBG-ChatGPT_and_ML-Slides/outfit/css/themes/dark.css'); return false;">Dark</a>
            <a href="#" onclick="document.getElementById('theme').setAttribute('href','/ProgressBG-ChatGPT_and_ML-Slides/outfit/css/themes/light.css'); return false;">Light</a>
            <a href="#" onclick="document.getElementById('theme').setAttribute('href','/ProgressBG-ChatGPT_and_ML-Slides/outfit/css/themes/projector.css'); return false;">Projector</a>
        </div>
        <div class="slides">
<!--
########################################################
##################### SLIDES START #####################
########################################################
-->
<section><h1>Build User Interface (UI) with Streamlit</h1></section>
<section data-transition="zoom">
    <!-- linkedin badge -->
    <!--<script type="text/javascript" src="https://platform.linkedin.com/badges/js/profile.js" async defer></script>-->
    <section class="copyright" data-transition="zoom">
        <div class="note">
            <p>Created for</p>
        </div>
        <div class="company">
            <a href="http://progressbg.net/Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¸Ñ€Ð°Ð½Ðµ-Ñ-python-2/">
            <img style="height:80%" src="/ProgressBG-ChatGPT_and_ML-Slides/outfit/images/logos/ProgressBG_logo_529_127.png">
            </a>
        </div>
        <div class="author">
            <span class="note">Iva E. Popova, 2016-2025,</span>
            <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>
        </div>
    </section>
    <section class="copyright" data-transition="zoom" style="margin-top: -2em;">
        <div class="company">
             <div class="LI-profile-badge"  data-version="v1" data-size="large" data-locale="en_US" data-type="vertical" data-theme="dark" data-vanity="ivapopova"><a class="LI-simple-link" href='https://bg.linkedin.com/in/ivapopova?trk=profile-badge'>Iva E. Popova on LinkedIn</a></div>
        </div>
    </section>
</section>


<section class="main-sesction-title" id="Streamlit_Overview"><h1>Streamlit Overview</h1></section>
<section class="sub-sections"><h2>Streamlit Overview</h2>
    <section><h3>Streamlit Overview</h3>
        <dl class="fa" style="min-width:80vw">
            <dt>Streamlit is an open-source Python framework designed specifically for data scientists and AI engineers to build interactive web applications with zero web development experience.</dt>
            <dd>Instead of writing HTML, CSS, or JavaScript, you write standard Python scripts. Streamlit then "interprets" those scripts and automatically generates a modern, responsive frontend for you.</dd>
            <dt>Installation: <code>pip install streamlit</code></dt>
        </dl>
    </section>
    <section><h3>Key Features</h3>
        <dl class="fa" style="min-width:80vw">
            <dt><b>No frontend code required</b></dt>
            <dd>You create titles, sliders, buttons, and charts using simple commands like st.title() or st.button().</dd>
            <dt><b>Automatic hot-reloading</b></dt>
            <dd>As soon as you save your Python file, the web app in your browser updates instantly to show the changes.</dd>
            <dt><b>Built-in chat widgets</b></dt>
            <dd>It includes specialized components for AI, such as st.chat_input and st.chat_message, which are perfect for building ChatGPT-like interfaces.</dd>
            <dt><b>Easy data visualization</b></dt>
            <dd>It integrates seamlessly with libraries like Pandas, Plotly, and Matplotlib to display interactive tables and graphs.</dd>
        </dl>
    </section>
    <section><h3>How it Works (The "Mental Model")</h3>
        <dl class="fa" style="min-width:80vw">
            <dt>Streamlit has a unique execution model: The script runs from top to bottom every time a user interacts with a widget.</dt>
            <dd>1. The user moves a slider or types in a text box.</dd>
            <dd>2. Streamlit reruns the entire Python script.</dd>
            <dd>3. The UI updates to reflect the new state of your variables.</dd>
            <dt>To prevent slow AI models from reloading every time, Streamlit uses Caching (@st.cache_resource), which keeps the model in memory across these reruns.</dt>
        </dl>
    </section>
    <section><h3>Quick Command Comparison</h3>
        <table border="1" style="border-collapse: collapse; width: 100%; font-family: sans-serif;">
            <thead>
                <tr style="background-color: #f2f2f2; text-align: left;">
                <th style="padding: 10px; border: 1px solid #ddd;">Task</th>
                <th style="padding: 10px; border: 1px solid #ddd;">Python (Terminal)</th>
                <th style="padding: 10px; border: 1px solid #ddd;">Streamlit (Web UI)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                <td style="padding: 10px; border: 1px solid #ddd; font-weight: bold;">Print Text</td>
                <td style="padding: 10px; border: 1px solid #ddd;"><code>print("Hello")</code></td>
                <td style="padding: 10px; border: 1px solid #ddd;"><code>st.write("Hello")</code></td>
                </tr>
                <tr>
                <td style="padding: 10px; border: 1px solid #ddd; font-weight: bold;">Get Input</td>
                <td style="padding: 10px; border: 1px solid #ddd;"><code>name = input("Name?")</code></td>
                <td style="padding: 10px; border: 1px solid #ddd;"><code>name = st.text_input("Name?")</code></td>
                </tr>
                <tr>
                <td style="padding: 10px; border: 1px solid #ddd; font-weight: bold;">Display Table</td>
                <td style="padding: 10px; border: 1px solid #ddd;"><code>print(df)</code></td>
                <td style="padding: 10px; border: 1px solid #ddd;"><code>st.dataframe(df)</code></td>
                </tr>
                <tr>
                <td style="padding: 10px; border: 1px solid #ddd; font-weight: bold;">Show Image</td>
                <td style="padding: 10px; border: 1px solid #ddd;"><em>Requires external lib</em></td>
                <td style="padding: 10px; border: 1px solid #ddd;"><code>st.image("pic.jpg")</code></td>
                </tr>
                <tr>
                <td style="padding: 10px; border: 1px solid #ddd; font-weight: bold;">Chat Context</td>
                <td style="padding: 10px; border: 1px solid #ddd;"><code>messages.append(...)</code></td>
                <td style="padding: 10px; border: 1px solid #ddd;"><code>st.session_state.messages</code></td>
                </tr>
            </tbody>
            </table>
    </section>
    <section><h3>Run Streamlit Script</h3>
        <dl class="fa">
            <dt>Run the script using the command: <code>streamlit run script.py</code></dt>
            <dt>Streamlit will open a local web server and display your app in your default browser.</dt>
            <dt>Streamlit will automatically reload the app when you make changes to the script.</dt>
            <dt>Example:</dt>
            <dd>Let's have next app.py</dd>
            <pre><code rel="Python" class="python" style="min-height: 1vh;">
                import streamlit as st

                st.title("Simple Column Layout")
            </code></pre>
            <dd>Run it using: <code>streamlit run app.py</code></dd>
        </dl>
    </section>
    <section><h3>Example: Simple 2-Column Layout</h3>
        <dl class="fa">
            <pre><code rel="Python" class="python" style="min-height: 1vh;">
                import streamlit as st

                st.title("Simple Column Layout")

                # 1. Create two columns of equal width
                col1, col2 = st.columns(2)

                # 2. Add content to the first column
                with col1:
                    st.header("Column A")
                    st.write("This is the left side.")
                    st.button("Click Left")

                # 3. Add content to the second column
                with col2:
                    st.header("Column B")
                    st.write("This is the right side.")
                    st.button("Click Right")
            </code></pre>
            <dd>Run it using: <code>streamlit run app.py</code></dd>
        </dl>
    </section>
</section>


<section class="main-section-title"><h1>Build Sentiment-Aware Chatbot with Streamlit UI</h1></section>
<section class="sub-sections"><h2>Build Sentiment-Aware Chatbot with Streamlit UI</h2>
    <section>
        <dl class="fa" style="min-width:80vw">
            <dt>To convert our Ollama + HuggingFace Hybrid Bot into a professional-looking web application, we will use Streamlit's chat elements.</dt>
            <dt>Note, that the script uses @st.cache_resource to ensure the 300MB sentiment model is only loaded into memory once, making the app much faster for your students to use.</dt>
            <pre><code rel="Python" class="python" style="min-height: 1vh;">
                import streamlit as st
                import ollama
                from transformers import pipeline

                # --- 1. SETTINGS & MODEL LOADING ---
                st.set_page_config(page_title="Hybrid Sentiment Bot", layout="wide")

                LLM_MODEL = "phi3:latest"
                EMO_MODEL = "j-hartmann/emotion-english-distilroberta-base"

                # Cache the model so it doesn't reload on every interaction
                @st.cache_resource
                def load_models():
                    st.write(f"ðŸ”„ Loading {EMO_MODEL} into memory...")
                    return pipeline("text-classification", model=EMO_MODEL)

                sentiment_pipe = load_models()

                # --- 2. SESSION STATE (Memory) ---
                if "messages" not in st.session_state:
                    st.session_state.messages = []
                if "last_emotion" not in st.session_state:
                    st.session_state.last_emotion = "None"

                # --- 3. UI LAYOUT ---
                st.title("ðŸ¤– Hybrid Sentiment-Aware Assistant")

                # Sidebar for status and metrics
                with st.sidebar:
                    st.header("Analytics")
                    st.metric("Detected Emotion", st.session_state.last_emotion.upper())
                    if st.button("Clear Chat"):
                        st.session_state.messages = []
                        st.rerun()

                # Display chat history
                for message in st.session_state.messages:
                    with st.chat_message(message["role"]):
                        st.markdown(message["content"])

                # --- 4. CHAT LOGIC ---
                if prompt := st.chat_input("How are you feeling today?"):
                    # Step 1: Detect Emotion
                    emotion_result = sentiment_pipe(prompt)[0]
                    label = emotion_result['label']
                    st.session_state.last_emotion = label

                    # Display user message
                    with st.chat_message("user"):
                        st.markdown(prompt)
                    st.session_state.messages.append({"role": "user", "content": prompt})

                    # Step 2: Set dynamic system prompt based on your logic
                    tone_map = {
                        "anger": "The user is ANGRY. Be calm, empathetic, and try to de-escalate.",
                        "joy": "The user is HAPPY. Be energetic and share their excitement!",
                        "sadness": "The user is SAD. Be supportive, gentle, and very comforting."
                    }
                    system_prompt = tone_map.get(label, "Be a helpful and professional AI assistant.")

                    # Step 3: Generate Ollama Response
                    with st.chat_message("assistant"):
                        response_placeholder = st.empty()
                        full_response = ""

                        # Stream the output from Ollama
                        stream = ollama.chat(
                            model=LLM_MODEL,
                            messages=[{"role": "system", "content": system_prompt}] + st.session_state.messages,
                            stream=True,
                        )

                        for chunk in stream:
                            content = chunk['message']['content']
                            full_response += content
                            response_placeholder.markdown(full_response + "â–Œ")

                        response_placeholder.markdown(full_response)

                    st.session_state.messages.append({"role": "assistant", "content": full_response})
                    st.rerun() # Refresh to update the sidebar metric
            </code></pre>
        </dl>
    </section>
</section>

<!-- <section class="main-sesction-title" id="hw"><h1>Exercises</h1></section>
<section class="sub-sections"><h2>Task1</h2>
    <section><h3>The Task</h3>

    </section>
</section> -->

<!-- <section><h3>Submission</h3>
    <dl class="fa">
        <dt>Please, prefix your filenames/archive with your name initials, before sending.</dt>
        <dd>For instance: <b>iep_task1.py</b> or <b>iep_tasks.rar</b></dd>
        <dt>Send files to <a href="mailto:progressbg.python.course@gmail.com?Subject=HW: BuildUI_with_Streamlit">progressbg.python.course@gmail.com</a></dt>
    </dl>
</section> -->



<section class="disclaimer" data-background="/ProgressBG-ChatGPT_and_ML-Slides/outfit/images/for_slides/the_end_on_sand.jpg">
     <p>These slides are based on</p>
     <p>customised version of </p>
     <p><a href="http://hakim.se/">Hakimel</a>'s <a href="http://lab.hakim.se/reveal-js">reveal.js</a></p>
     <p>framework</p>
</section>
<!--
########################################################
##################### SLIDES END   #####################
########################################################
-->
        </div>
    </div>
    <!-- Custom processing -->
    <script src="/ProgressBG-ChatGPT_and_ML-Slides/outfit/js/slides.js"></script>
    <!-- external scripts -->
    <script src="/ProgressBG-ChatGPT_and_ML-Slides/lib/reveal.js/lib/js/head.min.js"></script>
    <script src="/ProgressBG-ChatGPT_and_ML-Slides/lib/reveal.js/js/reveal.js"></script>
     <!-- init reveal -->
    <script>
        // Full list of configuration options available at:
        // https://github.com/hakimel/reveal.js#configuration
        var highlightjsTabSize = '  ';
        Reveal.initialize({
            controls: true,
            progress: true,
            slideNumber: 'c/t',
            keyboard: true,
            history: true,
            center: true,
            width: 1920,
            height: 1280,
            // Bounds for smallest/largest possible scale to apply to content
            // minScale: .5,
            maxScale: 1,
            // slide transition
            transition: 'concave', // none/fade/slide/convex/concave/zoom
            // Factor of the display size that should remain empty around the content
            margin: 0.1,
            // shift+mouse click to zoom in/out element
            zoomKey: 'ctrl',
            // theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
            // transition: Reveal.getQueryHash().transition || 'default'
            // Optional reveal.js plugins
            dependencies: [
                { src: '/ProgressBG-ChatGPT_and_ML-Slides/lib/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
                { src: '/ProgressBG-ChatGPT_and_ML-Slides/lib/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                { src: '/ProgressBG-ChatGPT_and_ML-Slides/lib/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                { src: '/ProgressBG-ChatGPT_and_ML-Slides/lib/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.configure(); hljs.initHighlightingOnLoad(); } },
                { src: '/ProgressBG-ChatGPT_and_ML-Slides/lib/reveal.js/plugin/zoom-js/zoom.js', async: true },
                { src: '/ProgressBG-ChatGPT_and_ML-Slides/lib/reveal.js/plugin/notes/notes.js', async: true },
                { src: '/ProgressBG-ChatGPT_and_ML-Slides/lib/reveal.js/plugin/math/math.js', async: true }
            ]
        });
    </script>
</body>
</html>
